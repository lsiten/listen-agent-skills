# Skill创建最佳实践

基于对现有高质量skill的分析，总结以下最佳实践供参考。

## 结构设计原则

### 1. 适度复杂原则

**选择最简结构**：选择能满足需求的最简单结构，不要过度设计。

| 需求特征 | 推荐结构 |
|---------|---------|
| 单步骤/curl调用 | 简单型 |
| 多步骤/需脚本 | 中等型 |
| 多阶段/有状态 | 复杂型 |

### 2. 文件组织原则

**清晰的目录结构**：

```
good-skill/
├── SKILL.md           # 核心指令
├── README.md          # 用户文档
├── scripts/           # 执行脚本
└── resources/         # 参考文档
```

**避免**：
- 文件散乱放置
- 过深的目录嵌套
- 命名不规范

## 内容编写原则

### 1. 角色定义清晰

**好的例子**：
```markdown
你是一个专门处理问卷调查报告数据分析的AI助手，
具备智能选择分析模型、生成专业数据分析报告、
评估旧方案并给出改进建议的能力。
```

**不好的例子**：
```markdown
这个skill用于数据分析。
```

### 2. 使用emoji增强可读性

**推荐的emoji使用**：
- 📊 数据分析相关
- 🔍 搜索/查找相关
- 🎯 目标/精准相关
- ⚠️ 警告/重要提示
- ✅ 成功/完成
- ❌ 禁止/错误
- 🚀 启动/部署
- 📝 文档/编辑
- 🔧 配置/工具
- 💡 提示/建议

### 3. 执行步骤要具体

**好的例子**：
```markdown
### 第一步：安装依赖

```bash
cd skills/my-skill
pip install -r requirements.txt
```

### 第二步：执行分析

```bash
python scripts/analyze.py --input data.csv --output report.html
```
```

**不好的例子**：
```markdown
### 执行步骤

1. 安装依赖
2. 运行脚本
3. 查看结果
```

### 4. 参数说明使用表格

**推荐格式**：

| 参数 | 类型 | 必需 | 默认值 | 描述 |
|------|------|------|--------|------|
| `--input` | string | 是 | - | 输入文件路径 |
| `--output` | string | 否 | `output.html` | 输出文件路径 |
| `--verbose` | flag | 否 | `false` | 启用详细日志 |

### 5. 示例要真实可用

**好的例子**：
```bash
# 分析客户满意度问卷
python scripts/analyze_survey.py \
  --data "data/customer_satisfaction.csv" \
  --title "客户满意度调研报告" \
  --output "reports/satisfaction_report.html"
```

## 复杂Skill的特殊实践

### 1. 工作流程可视化

使用ASCII图或流程描述：

```
用户输入
    ↓
【阶段0：初始化】
    ├─ 检查配置
    └─ 生成上下文
    ↓
【阶段1：准备】
    ├─ 解析输入
    └─ 生成指令
    ↓
【阶段2：执行】
    └─ 输出结果
```

### 2. 明确约束条件

使用醒目的提示：

```markdown
### ⚠️ 执行顺序强制约束

**绝对禁止**：
- ❌ 跳过配置检查直接执行
- ❌ 在阶段0完成前创建输出文件

**必须遵守**：
- ✅ 首先检查配置文件是否存在
- ✅ 按阶段顺序执行
```

### 3. 字段规范详细化

对于需要生成配置文件的skill：

```markdown
#### `config.json` 字段规范

**必须字段**（必须包含）：
- `name`：配置名称（字符串）
- `version`：版本号（字符串）

**尽量要的字段**（尽量包含）：
- `description`：描述（字符串）
- `options`：选项（对象）

**其他补充字段**（可随意）：
- 可根据实际情况添加
```

### 4. 迭代式执行逻辑

对于需要多次迭代的任务：

```markdown
## 迭代式执行

⚠️ **核心原则**：执行不是一次性的，而是可以根据结果动态调整。

**迭代流程**：

1. **初始执行**：基于基础信息执行
2. **结果分析**：分析执行结果，提取关键信息
3. **判断完成**：
   - 如果完成 → 停止迭代
   - 如果未完成 → 继续下一步
4. **生成补充**：基于分析结果，生成新的执行计划
5. **迭代深入**：重复步骤2-4
```

## 故障排除设计

### 1. 常见问题表格化

| 问题 | 原因 | 解决方案 |
|------|------|----------|
| 依赖安装失败 | 网络问题 | 使用国内镜像源 |
| 权限错误 | 脚本无执行权限 | `chmod +x script.sh` |
| 输出为空 | 输入格式错误 | 检查输入文件格式 |

### 2. 调试模式说明

```markdown
### 调试模式

启用详细日志：

```bash
python scripts/main.py --verbose
```

检查配置：

```bash
cat .config/settings.json
```
```

## 文档质量检查

### 内容完整性

- [ ] 有清晰的角色定义
- [ ] 有任务概述
- [ ] 有系统要求（如需要）
- [ ] 有详细执行步骤
- [ ] 有参数说明
- [ ] 有使用示例
- [ ] 有故障排除

### 可操作性

- [ ] 命令可直接复制执行
- [ ] 示例使用真实参数
- [ ] 路径和变量有说明

### 可维护性

- [ ] 结构清晰有层次
- [ ] 关键信息有标注
- [ ] 版本和更新有记录

## 从现有Skill学习

### 简单型参考：wechat-work-notification

**亮点**：
- 直接的curl命令示例
- 清晰的参数说明
- 常用场景模板

### 中等型参考：survey-data-analysis

**亮点**：
- 完整的依赖说明
- 多种使用方法
- 参数表格清晰

### 复杂型参考：online-ticket-analyzer-v2

**亮点**：
- 详细的工作流程
- 完整的字段规范
- 迭代式执行逻辑
- 丰富的故障排除
